<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>School Smart Kiosk</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="assistant.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            background: linear-gradient(135deg, #48f9ff, #e8fcff, #2ddefd);
            color: #333;
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
            position: relative;
        }


        body::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-image: url("589431807_815813444550227_3889086255111213921_n.jpg");
            background-size: cover;
            background-position: center;
            background-repeat: no-repeat;
            opacity: 0.3;
            z-index: -1;
            pointer-events: none;
        }

        .container {
            max-width: 1200px;
            width: 100%;
            background-color: rgba(255, 255, 255, 0.95);
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
            overflow: hidden;
            position: relative;
            z-index: 1;
        }

        header {
            background: linear-gradient(to right, #2c3e50, #4ca1af);
            color: white;
            padding: 20px;
            text-align: center;
            position: relative;
        }

        .school-info {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 15px;
        }

        .school-logo {
            width: 70px;
            height: 70px;
            background-color: #fff;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 30px;
            color: #4ca1af;
        }

        h1 {
            font-size: 2.2rem;
            margin-bottom: 5px;
        }

        .subtitle {
            font-size: 1.2rem;
            opacity: 0.9;
        }

        .main-content {
            display: flex;
            min-height: 500px;
        }

        .sidebar {
            width: 250px;
            background: #2c3e50;
            color: white;
            padding: 20px;
            display: flex;
            flex-direction: column;
        }

        .search-box {
            display: flex;
            margin-bottom: 20px;
            width: 100%;
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
        }

        .search-box input {
            flex: 1;
            padding: 15px;
            border: none;
            font-size: 1.1rem;
            outline: none;
        }

        .search-box button {
            background: #4ca1af;
            color: white;
            border: none;
            padding: 0 20px;
            cursor: pointer;
            font-size: 1.2rem;
            transition: background 0.3s;
        }

        .search-box button:hover {
            background: #3a8a9a;
        }

        .nav-menu {
            list-style: none;
            margin-top: 10px;
            flex: 1;
        }

        .nav-menu li {
            margin-bottom: 15px;
        }

        .nav-menu a {
            color: white;
            text-decoration: none;
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 12px;
            border-radius: 8px;
            transition: background 0.3s;
        }

        .nav-menu a:hover,
        .nav-menu a.active {
            background: #4ca1af;
        }

        .nav-menu i {
            width: 20px;
            text-align: center;
        }

        .content {
            flex: 1;
            padding: 25px;
            display: flex;
            flex-direction: column;
        }

        .welcome-banner {
            background: linear-gradient(to right, #3498db, #2c3e50);
            color: white;
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 25px;
            text-align: center;
        }

        .card-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-bottom: 25px;
        }

        .card {
            background: white;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            padding: 20px;
            transition: transform 0.3s;
        }

        .card:hover {
            transform: translateY(-5px);
        }

        .card h3 {
            color: #2c3e50;
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 2px solid #4ca1af;
        }

        .event-list,
        .directory-list {
            list-style: none;
        }

        .event-list li,
        .directory-list li {
            padding: 10px 0;
            border-bottom: 1px solid #eee;
            display: flex;
            justify-content: space-between;
        }

        .event-date {
            background: #4ca1af;
            color: white;
            padding: 3px 8px;
            border-radius: 5px;
            font-size: 0.9rem;
        }

        .map-container {
            flex: 1;
            border-radius: 10px;
            overflow: hidden;
            position: relative;
            min-height: 300px;
        }

        #map {
            width: 100%;
            height: 100%;
        }

        footer {
            background: #2c3e50;
            color: white;
            text-align: center;
            padding: 15px;
            font-size: 0.9rem;
        }

        /* Campus Directory Image Styles */
        .campus-map-container {
            margin-top: 15px;
            border-radius: 8px;
            overflow: hidden;
            position: relative;
        }

        .campus-map-image {
            width: 100%;
            height: 350px;
            object-fit: cover;
            border-radius: 8px;
            cursor: pointer;
            transition: transform 0.3s ease;
        }

        .campus-map-image:hover {
            transform: scale(1.02);
        }

        .campus-map-placeholder {
            width: 100%;
            height: 350px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border-radius: 8px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            color: white;
            cursor: pointer;
            transition: transform 0.3s ease;
        }

        .campus-map-placeholder:hover {
            transform: scale(1.02);
        }

        .campus-map-placeholder i {
            font-size: 48px;
            margin-bottom: 10px;
        }

        .campus-map-placeholder span {
            font-size: 14px;
            opacity: 0.9;
        }

        /* Modal for enlarged map */
        .map-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            z-index: 2000;
            align-items: center;
            justify-content: center;
        }

        .map-modal-content {
            max-width: 90%;
            max-height: 90%;
            background: white;
            border-radius: 10px;
            padding: 20px;
            text-align: center;
        }

        .map-modal-content img {
            max-width: 100%;
            max-height: 70vh;
            border-radius: 8px;
        }

        .close-map-modal {
            background: #2c3e50;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            margin-top: 15px;
        }

        /* ========== RESPONSIVE DESIGN ========== */

        /* Tablet Styles (768px - 1024px) */
        @media screen and (max-width: 1024px) {
            .main-content {
                flex-direction: column;
            }

            .sidebar {
                width: 100%;
                flex-direction: row;
                flex-wrap: wrap;
                padding: 15px;
                gap: 10px;
            }

            .search-box {
                flex: 1;
                min-width: 200px;
                margin-bottom: 0;
            }

            .nav-menu {
                display: flex;
                flex-wrap: wrap;
                gap: 5px;
                margin-top: 0;
                width: 100%;
            }

            .nav-menu li {
                margin-bottom: 0;
            }

            .nav-menu a {
                padding: 10px 15px;
                font-size: 0.9rem;
            }

            .card-grid {
                grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            }

            h1 {
                font-size: 1.8rem;
            }

            .subtitle {
                font-size: 1rem;
            }

            .map-modal-content {
                max-width: 95%;
                padding: 15px;
            }

            .map-modal-content>div>div {
                grid-template-columns: repeat(2, 1fr) !important;
            }
        }

        /* Mobile Styles (up to 768px) */
        @media screen and (max-width: 768px) {
            body {
                padding: 10px;
            }

            .container {
                border-radius: 10px;
            }

            header {
                padding: 15px;
            }

            .school-info {
                flex-direction: column;
                text-align: center;
            }

            .school-logo {
                width: 60px;
                height: 60px;
                font-size: 25px;
            }

            h1 {
                font-size: 1.4rem;
            }

            .subtitle {
                font-size: 0.9rem;
            }

            .sidebar {
                padding: 10px;
            }

            .search-box {
                width: 100%;
            }

            .search-box input {
                padding: 12px;
                font-size: 1rem;
            }

            .nav-menu {
                justify-content: center;
            }

            .nav-menu a {
                padding: 8px 12px;
                font-size: 0.85rem;
            }

            .nav-menu a span {
                display: none;
            }

            .content {
                padding: 15px;
            }

            .welcome-banner {
                padding: 15px;
            }

            .welcome-banner h2 {
                font-size: 1.2rem;
            }

            .welcome-banner p {
                font-size: 0.85rem;
            }

            .card-grid {
                grid-template-columns: 1fr;
                gap: 15px;
            }

            .card {
                padding: 15px;
            }

            .card h3 {
                font-size: 1rem;
            }

            .event-list li,
            .directory-list li {
                flex-direction: column;
                gap: 5px;
                text-align: center;
            }

            .campus-map-image {
                height: 250px;
            }

            .campus-map-placeholder {
                height: 250px;
            }

            .map-container {
                min-height: 250px;
            }

            footer {
                padding: 12px;
                font-size: 0.75rem;
            }

            footer p {
                margin-bottom: 5px;
            }

            .map-modal-content {
                max-width: 98%;
                padding: 10px;
                margin: 10px;
            }

            .map-modal-content h3 {
                font-size: 1rem;
            }

            .map-modal-content>div>div {
                grid-template-columns: 1fr !important;
                gap: 10px !important;
            }

            .map-modal-content>div>div>div {
                padding: 15px !important;
            }

            .map-modal-content>div>div>div i {
                font-size: 24px !important;
            }

            /* Mini Assistant Button */
            .mini-assistant {
                width: 50px;
                height: 50px;
                font-size: 20px;
                bottom: 15px;
                right: 15px;
            }

            /* Assistant Modal Mobile */
            .assistant-modal .modal-content {
                width: 95%;
                max-width: 350px;
                padding: 15px;
            }

            .assistant-buttons {
                grid-template-columns: 1fr;
            }

            .assistant-btn {
                padding: 12px;
                font-size: 0.9rem;
            }
        }

        /* Small Mobile Styles (up to 480px) */
        @media screen and (max-width: 480px) {
            body {
                padding: 5px;
            }

            h1 {
                font-size: 1.2rem;
            }

            .subtitle {
                font-size: 0.8rem;
            }

            .school-logo {
                width: 50px;
                height: 50px;
                font-size: 20px;
            }

            .nav-menu a {
                padding: 8px 10px;
            }

            .welcome-banner h2 {
                font-size: 1rem;
            }

            .welcome-banner p {
                font-size: 0.75rem;
            }

            .card h3 {
                font-size: 0.95rem;
            }

            .event-date {
                font-size: 0.8rem;
                padding: 2px 6px;
            }

            footer {
                font-size: 0.7rem;
            }

            .campus-map-image {
                height: 200px;
            }
        }
    </style>
    <style>
        /* About Us Styles - Injected here for organization */
        .about-title-card {
            grid-column: 1 / -1;
            background: linear-gradient(to right, #4ca1af, #2c3e50);
            color: white;
            text-align: center;
        }

        .about-title-card h3 {
            color: white;
            border-bottom-color: rgba(255, 255, 255, 0.3);
        }

        .member-card {
            display: flex;
            flex-direction: column;
            align-items: center;
            text-align: center;
            padding: 25px;
            transition: transform 0.3s, box-shadow 0.3s;
        }

        .member-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
        }

        .member-image {
            width: 120px;
            height: 120px;
            border-radius: 50%;
            object-fit: cover;
            margin-bottom: 15px;
            border: 4px solid #4ca1af;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
        }

        .member-name {
            font-size: 1.1rem;
            font-weight: bold;
            color: #2c3e50;
            margin-bottom: 5px;
        }

        .member-role {
            font-size: 0.9rem;
            color: #7f8c8d;
            background: #f0f2f5;
            padding: 4px 12px;
            border-radius: 15px;
        }

        /* News Styles */
        .news-image {
            width: 100%;
            height: 180px;
            object-fit: cover;
            border-radius: 8px;
            margin-bottom: 15px;
        }

        .news-content h3 {
            margin-bottom: 10px;
            font-size: 1.1rem;
            color: #2c3e50;
        }

        .news-content p {
            font-size: 0.9rem;
            color: #666;
            line-height: 1.5;
        }

        /* Campus Directory Styles */
        .building-card {
            cursor: pointer;
            transition: transform 0.3s, box-shadow 0.3s;
            position: relative;
            overflow: hidden;
            border-radius: 10px;
            height: 250px;
        }

        .building-card:hover {
            transform: scale(1.03);
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.2);
        }

        .building-card img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: transform 0.5s;
        }

        .building-card:hover img {
            transform: scale(1.1);
        }

        .building-overlay {
            position: absolute;
            bottom: 0;
            left: 0;
            width: 100%;
            background: linear-gradient(transparent, rgba(0, 0, 0, 0.8));
            padding: 20px;
            color: white;
        }

        .building-title {
            font-size: 1.5rem;
            font-weight: bold;
            margin-bottom: 5px;
        }

        .building-desc {
            font-size: 0.9rem;
            opacity: 0.9;
        }

        /* Rating Modal Styles */
        .rating-modal {
            display: none;
            position: fixed;
            bottom: 20px;
            left: 20px;
            background: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
            z-index: 2000;
            text-align: center;
            width: 300px;
            animation: slideRight 0.5s ease;
        }

        @keyframes slideRight {
            from {
                transform: translateX(-100%);
                opacity: 0;
            }

            to {
                transform: translateX(0);
                opacity: 1;
            }
        }

        .rating-stars {
            font-size: 2rem;
            color: #ddd;
            margin: 10px 0;
            cursor: pointer;
        }

        .rating-stars i:hover {
            color: #f1c40f;
        }

        .close-rating {
            position: absolute;
            top: 5px;
            right: 10px;
            color: #999;
            cursor: pointer;
            font-size: 1.2rem;
        }

        /* Survey Styles */
        .survey-container {
            max-width: 800px;
            margin: 0 auto;
        }

        .likert-scale {
            display: flex;
            justify-content: space-between;
            margin: 15px 0;
            border-bottom: 1px solid #eee;
            padding-bottom: 15px;
        }

        .likert-option {
            display: flex;
            flex-direction: column;
            align-items: center;
            font-size: 0.8rem;
            text-align: center;
            width: 18%;
        }

        .likert-option input {
            margin-bottom: 5px;
            cursor: pointer;
            width: 20px;
            height: 20px;
        }

        .survey-question {
            margin-bottom: 20px;
            background: #fff;
            padding: 15px;
            border-radius: 8px;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.05);
        }

        .survey-question h4 {
            color: #2c3e50;
            margin-bottom: 10px;
        }

        .scale-legend {
            background: #f8f9fa;
            padding: 10px;
            border-radius: 5px;
            margin-bottom: 20px;
            font-size: 0.9rem;
            color: #555;
            display: flex;
            justify-content: space-between;
            flex-wrap: wrap;
        }

        /* Virtual Keyboard Styles */
        .keyboard-container {
            display: none;
            /* Hidden by default */
            position: fixed;
            bottom: 0;
            left: 0;
            width: 100%;
            background-color: #2c3e50;
            padding: 20px 20px 40px 20px;
            z-index: 9999;
            box-shadow: 0 -5px 15px rgba(0, 0, 0, 0.3);
            animation: slideUp 0.3s ease-out;
            text-align: center;
        }

        @keyframes slideUp {
            from {
                transform: translateY(100%);
            }

            to {
                transform: translateY(0);
            }
        }

        .keyboard-row {
            display: flex;
            justify-content: center;
            margin-bottom: 10px;
            gap: 8px;
        }

        .key {
            background-color: #ecf0f1;
            border: none;
            border-radius: 5px;
            padding: 15px 0;
            width: 45px;
            color: #2c3e50;
            font-size: 1.2rem;
            font-weight: bold;
            cursor: pointer;
            box-shadow: 0 3px 0 #bdc3c7;
            transition: all 0.1s;
        }

        .key:active {
            background-color: #bdc3c7;
            box-shadow: 0 1px 0 #bdc3c7;
            transform: translateY(2px);
        }

        .key.special {
            background-color: #3498db;
            color: white;
            box-shadow: 0 3px 0 #2980b9;
            width: auto;
            padding-left: 20px;
            padding-right: 20px;
        }

        .key.special:active {
            background-color: #2980b9;
            box-shadow: 0 1px 0 #2980b9;
        }

        .key.space {
            width: 300px;
        }

        .key.close-keyboard {
            background-color: #e74c3c;
            color: white;
            box-shadow: 0 3px 0 #c0392b;
            position: absolute;
            top: 10px;
            right: 15px;
            padding: 8px 15px;
            width: auto;
            font-size: 1rem;
        }
    </style>
</head>

<body>
    <div class="container">
        <header>
            <div class="school-info">
                <div class="school-logo">
                    <i class="fas fa-graduation-cap"></i>
                </div>
                <div>
                    <h1>Makati High School</h1>
                    <p class="subtitle">Smart Kiosk - Enhanced Navigation & Information System</p>
                </div>
            </div>
        </header>
        <div class="main-content">
            <div class="sidebar">
                <div class="search-box">
                    <input type="text" id="search-input" placeholder="Search for rooms, people..."
                        onkeypress="checkSearchEnter(event)">
                    <button id="search-btn" onclick="performSearch()"><i class="fas fa-search"></i></button>
                </div>
                <ul class="nav-menu">
                    <li><a href="#" class="active"><i class="fas fa-home"></i> Home</a></li>
                    <li><a href="#" onclick="showCampusDirectory()"><i class="fas fa-map-marked-alt"></i> Campus
                            Directory</a></li>
                    <li><a href="#" onclick="viewEvents()"><i class="fas fa-calendar-alt"></i> Events</a></li>
                    <li><a href="#" onclick="AboutUs()"><i class="fas fa-user-friends"></i> About Us</a></li>
                    <li><a href="#" onclick="viewNews()"><i class="fas fa-newspaper"></i> News</a></li>
                    <li><a href="#" onclick="viewSurvey()"><i class="fas fa-poll"></i> Survey</a></li>
                    <li><a href="#" onclick="viewHelp()"><i class="fas fa-question-circle"></i> Help</a></li>
                </ul>
            </div>
            <div class="content">
                <div class="welcome-banner">
                    <h2>Welcome to Makati High School</h2>
                    <p id="date-time-display">Loading...</p>
                </div>
                <div class="card-grid" id="card-grid">
                    <div class="card" id="events-card">
                        <h3><i class="fas fa-calendar-day"></i> Today's Events</h3>
                        <ul class="event-list">
                            <li><span>Science Fair</span> <span class="event-date">10:00 AM</span></li>
                            <li><span>Basketball Practice</span> <span class="event-date">3:45 PM</span></li>
                            <li><span>Parent-Teacher Meeting</span> <span class="event-date">6:00 PM</span></li>
                        </ul>
                    </div>
                    <div class="card" id="announcements-card">
                        <h3><i class="fas fa-clipboard-list"></i> Announcements</h3>
                        <ul class="event-list">
                            <li>Yearbook photos will be taken next week</li>
                            <li>Library will close early on Friday</li>
                            <li>New cafeteria menu now available</li>
                        </ul>
                    </div>
                    <div class="card" id="directory-card">
                        <h3><i class="fas fa-map-marked-alt"></i> Campus Directory</h3>
                        <div class="campus-map-container">
                            <img src="Intelliguide .jpg" alt="Makati High School Campus Map" class="campus-map-image"
                                onclick="openMapModal()" title="Click to enlarge">
                        </div>
                        <ul class="directory-list" style="margin-top: 15px;">
                            <li><span>Building A</span> <span>Classrooms</span></li>
                            <li><span>Building B</span> <span>Labs & Library</span></li>
                            <li><span>Building C</span> <span>Admin Offices</span></li>
                        </ul>
                    </div>
                </div>

                <div class="map-container" id="map-container">
                    <iframe width="100%" height="400" frameborder="0" scrolling="no" marginheight="0" marginwidth="0"
                        id="gmap_canvas"
                        src="https://maps.google.com/maps?width=950&amp;height=400&amp;hl=en&amp;q=Gen.%20Luna%20Street%20Poblacion,%20Makati%20City%20Makati+(Makati%20High%20School)&amp;t=h&amp;z=18&amp;ie=UTF8&amp;iwloc=B&amp;output=embed"></iframe>
                    <a href='https://www.acadoo.de/'>ghostwriting</a>
                    <script type='text/javascript'
                        src='https://embedmaps.com/google-maps-authorization/script.js?id=dfe4639903d7cc4e19f8305d70f67ed7e9b2c164'></script>
                </div>
            </div>
        </div>
        <footer>
            <p>Makati High School Smart Kiosk | Gen. Luna Street Poblacion, Makati City | Principal's Office :
                890-8320 / 890-5938</p>
            <p>Â© 2025 Makati High School. All rights reserved.</p>
        </footer>
    </div>

    <!-- Campus Map Modal -->
    <div class="map-modal" id="map-modal">
        <div class="map-modal-content">
            <h3 style="margin-bottom: 15px; color: #2c3e50;"><i class="fas fa-map-marked-alt"></i> Makati High School
                Campus Map</h3>
            <img src="Intelliguide .jpg" alt="Makati High School Campus Map"
                style="max-width: 100%; max-height: 70vh; border-radius: 8px; box-shadow: 0 4px 15px rgba(0,0,0,0.2);">
            <button class="close-map-modal" onclick="closeMapModal()">Close Map</button>
        </div>
    </div>

    <!-- Mini Assistant Button -->
    <div class="mini-assistant" id="mini-assistant">
        <i class="fas fa-graduation-cap"></i>
    </div>

    <!-- Assistant Modal -->
    <div class="assistant-modal" id="assistant-modal">
        <div class="modal-content">
            <h3>School Assistant</h3>
            <p id="assistant-greeting" class="typing">How can I help you today?</p>
            <div class="assistant-buttons">
                <button class="assistant-btn flash" id="navigate-btn" onclick="navigateRooms()"><i
                        class="fas fa-route"></i> Navigate Rooms</button>
                <button class="assistant-btn flash" id="events-btn" onclick="viewEvents()"><i
                        class="fas fa-calendar-day"></i> View Events</button>
                <button class="assistant-btn flash" id="announcements-btn" onclick="readAnnouncements()"><i
                        class="fas fa-clipboard-list"></i> Read Announcements</button>
                <button class="assistant-btn" onclick="getDirections()"><i class="fas fa-directions"></i> Get
                    Directions</button>
                <button class="assistant-btn" onclick="callSchool()"><i class="fas fa-phone"></i> Call School</button>
                <button class="assistant-btn" onclick="showDirectory()"><i class="fas fa-users"></i> Staff
                    Directory</button>
                <button class="assistant-btn" onclick="openChatbot()"><i class="fas fa-robot"></i> Chat with AI</button>
            </div>
            <button class="close-modal" id="close-modal">Close</button>
        </div>
    </div>

    <!-- Rating Modal -->
    <div class="rating-modal" id="rating-modal">
        <div class="close-rating" onclick="closeRatingModal()">&times;</div>
        <h3 style="color: #2c3e50; margin-bottom: 5px;">Rate Your Experience</h3>
        <p style="font-size: 0.9rem; color: #777;">How likely are you to recommend us?</p>
        <div class="rating-stars" id="rating-stars">
            <i class="fas fa-star" onclick="rate(1)"></i>
            <i class="fas fa-star" onclick="rate(2)"></i>
            <i class="fas fa-star" onclick="rate(3)"></i>
            <i class="fas fa-star" onclick="rate(4)"></i>
            <i class="fas fa-star" onclick="rate(5)"></i>
        </div>
    </div>

    <!-- Date/Time Script -->
    <script>
        function updateDateTime() {
            const now = new Date();
            const options = {
                timeZone: 'Asia/Manila',
                year: 'numeric',
                month: 'long',
                day: 'numeric',
                hour: '2-digit',
                minute: '2-digit',
                second: '2-digit'
            };
            const philippineTime = new Intl.DateTimeFormat('en-US', options).format(now);
            document.getElementById('date-time-display').textContent = 'Current Philippine Time: ' + philippineTime;
        }

        updateDateTime();
        setInterval(updateDateTime, 1000);
    </script>



    <!-- Assistant Modal Functions -->
    <script>
        // Wait for DOM to be fully loaded
        document.addEventListener('DOMContentLoaded', function () {
            const miniAssistant = document.getElementById('mini-assistant');
            const assistantModal = document.getElementById('assistant-modal');
            const closeModalBtn = document.getElementById('close-modal');

            // Open modal when clicking the mini assistant button
            miniAssistant.addEventListener('click', function () {
                assistantModal.style.display = 'flex';
            });

            // Close modal when clicking the close button
            closeModalBtn.addEventListener('click', function () {
                assistantModal.style.display = 'none';
            });

            // Close modal when clicking outside the modal content
            assistantModal.addEventListener('click', function (e) {
                if (e.target === assistantModal) {
                    assistantModal.style.display = 'none';
                }
            });
        });

        // Open Campus Map Modal
        function openMapModal() {
            document.getElementById('map-modal').style.display = 'flex';
        }

        // Close Campus Map Modal
        function closeMapModal() {
            document.getElementById('map-modal').style.display = 'none';
        }

        // Close map modal when clicking outside
        document.getElementById('map-modal').addEventListener('click', function (e) {
            if (e.target === this) {
                closeMapModal();
            }
        });

        // Show Campus Directory function
        function showCampusDirectory() {
            const cardGrid = document.getElementById('card-grid');
            cardGrid.innerHTML = `
                <div class="card about-title-card">
                    <h3><i class="fas fa-map-marked-alt"></i> Campus Directory</h3>
                    <p>Select a building to view detailed locations</p>
                </div>

                <div class="building-card" onclick="viewBuilding('Building A')">
                    <img src="https://placehold.co/600x400/3498db/white?text=Building+A" alt="Building A">
                    <div class="building-overlay">
                        <div class="building-title">Building A</div>
                        <div class="building-desc">Main Offices, Clinic, Library</div>
                    </div>
                </div>

                <div class="building-card" onclick="viewBuilding('Building B')">
                    <img src="https://placehold.co/600x400/e74c3c/white?text=Building+B" alt="Building B">
                    <div class="building-overlay">
                        <div class="building-title">Building B</div>
                        <div class="building-desc">Science Labs, Computer Rooms</div>
                    </div>
                </div>

                <div class="building-card" onclick="viewBuilding('Building C')">
                    <img src="https://placehold.co/600x400/2ecc71/white?text=Building+C" alt="Building C">
                    <div class="building-overlay">
                        <div class="building-title">Building C</div>
                        <div class="building-desc">Senior High School Wing</div>
                    </div>
                </div>

                <div class="building-card" onclick="viewBuilding('Building D')">
                    <img src="https://placehold.co/600x400/f39c12/white?text=Building+D" alt="Building D">
                    <div class="building-overlay">
                        <div class="building-title">Building D</div>
                        <div class="building-desc">Gymnasium, Cafeteria</div>
                    </div>
                </div>
            `;
            document.getElementById('assistant-modal').style.display = 'none';
        }

        function viewBuilding(buildingName) {
            const cardGrid = document.getElementById('card-grid');

            // Logic for floor count
            let floors = [1, 2, 3, 4]; // Default 4 floors
            if (buildingName === 'Building D') {
                floors = [1, 2, 3, 4, 5, 6]; // 6 floors for Building D
            }

            let floorHtml = '';
            floors.forEach(floor => {
                floorHtml += `
                    <div class="card" onclick="viewFloor('${buildingName}', ${floor})" style="cursor:pointer; transition: transform 0.2s;">
                        <img src="https://placehold.co/600x300/555/white?text=${buildingName.replace(' ', '+')}+-+Floor+${floor}" style="width:100%; height:150px; object-fit:cover; border-radius:5px; margin-bottom:10px;">
                        <h4 style="color:#2c3e50; text-align:center;">Floor ${floor}</h4>
                        <p style="text-align:center; color:#777; font-size:0.85rem;">Classrooms & Facilities</p>
                    </div>
                `;
            });

            cardGrid.innerHTML = `
                <div class="card" style="grid-column: 1 / -1; display:flex; align-items:center; gap:15px; background:linear-gradient(to right, #2c3e50, #3498db); color:white;">
                    <button onclick="showCampusDirectory()" style="background:rgba(255,255,255,0.2); border:none; color:white; padding:10px 15px; border-radius:5px; cursor:pointer; font-size:1rem;">
                        <i class="fas fa-arrow-left"></i> Back to Directory
                    </button>
                    <h3 style="margin:0; border:none; color:white;">${buildingName} Detailed View</h3>
                </div>
                ${floorHtml}
            `;
        }

        function viewFloor(buildingName, floor) {
            const cardGrid = document.getElementById('card-grid');

            // Generate 2 rooms for the specific floor
            const rooms = [1, 2];
            let roomHtml = '';

            rooms.forEach(roomNum => {
                const roomLabel = `Room ${floor}0${roomNum}`; // e.g., Room 101, Room 102
                roomHtml += `
                    <div class="card" style="transition: transform 0.2s;">
                        <img src="https://placehold.co/600x400/3498db/white?text=${roomLabel.replace(' ', '+')}" style="width:100%; height:200px; object-fit:cover; border-radius:5px; margin-bottom:10px;">
                        <h4 style="color:#2c3e50; text-align:center;">${roomLabel}</h4>
                        <p style="text-align:center; color:#777; font-size:0.85rem;">Standard Classroom</p>
                    </div>
                `;
            });

            cardGrid.innerHTML = `
                <div class="card" style="grid-column: 1 / -1; display:flex; align-items:center; gap:15px; background:linear-gradient(to right, #4ca1af, #2c3e50); color:white;">
                    <button onclick="viewBuilding('${buildingName}')" style="background:rgba(255,255,255,0.2); border:none; color:white; padding:10px 15px; border-radius:5px; cursor:pointer; font-size:1rem;">
                        <i class="fas fa-arrow-left"></i> Back to ${buildingName}
                    </button>
                    <h3 style="margin:0; border:none; color:white;">${buildingName} - Floor ${floor}</h3>
                </div>
                ${roomHtml}
            `;
        }

        // Navigate Rooms function
        function navigateRooms() {
            const cardGrid = document.getElementById('card-grid');
            cardGrid.innerHTML =
                '<div class="card">' +
                '<h3><i class="fas fa-door-open"></i> Room Directory</h3>' +
                '<ul class="directory-list">' +
                '<li><span>Room 101</span> <span>Principal\'s Office</span></li>' +
                '<li><span>Room 102</span> <span>Admin Office</span></li>' +
                '<li><span>Room 103</span> <span>Registrar</span></li>' +
                '<li><span>Room 201</span> <span>Science Lab</span></li>' +
                '<li><span>Room 202</span> <span>Computer Lab</span></li>' +
                '<li><span>Room 203</span> <span>Guidance Office</span></li>' +
                '<li><span>Room 301</span> <span>Library</span></li>' +
                '<li><span>Room 302</span> <span>AVR</span></li>' +
                '</ul>' +
                '</div>';
            document.getElementById('assistant-modal').style.display = 'none';
        }

        // Auto Refresh and Rating Logic
        const REFRESH_TIME = 7 * 60 * 1000; // 7 minutes
        const RATING_TIME = 3 * 60 * 1000;  // 3 minutes

        setTimeout(() => {
            location.reload();
        }, REFRESH_TIME);

        setTimeout(() => {
            document.getElementById('rating-modal').style.display = 'block';
        }, RATING_TIME);

        function closeRatingModal() {
            document.getElementById('rating-modal').style.display = 'none';
        }

        function rate(stars) {
            const starElements = document.querySelectorAll('.rating-stars i');
            starElements.forEach((star, index) => {
                if (index < stars) {
                    star.style.color = '#f1c40f';
                } else {
                    star.style.color = '#ddd';
                }
            });

            setTimeout(() => {
                alert('Thank you for your feedback! We appreciate your ' + stars + ' star rating.');
                closeRatingModal();
            }, 300);
        }

        function viewSurvey() {
            const cardGrid = document.getElementById('card-grid');
            const questions = [
                "Do you find the real-time announcements helpful in staying updated with school events and notices?",
                "Does the interactive map make it easier for you to locate rooms and facilities inside the school?",
                "Is the voice-touch inquiry feature convenient and accessible for you to use?",
                "Does the search function help you quickly and accurately find the information you need?",
                "Do you find the kiosk more reliable than bulletin boards or word-of-mouth announcements?",
                "Does using the kiosk help you save time in getting information compared to traditional methods?",
                "Do you feel more confident that the information from the kiosk is correct and updated?",
                "Does the kiosk make it easier to complete multiple tasks (e.g., checking schedules, announcements, menus)?",
                "Do you find the kiosk easy to use and understand, even without assistance?",
                "Overall, do you think the Intelliguide kiosk is a helpful tool for navigation and information access in school?"
            ];

            let questionsHtml = '';
            questions.forEach((q, index) => {
                questionsHtml += `
                    <div class="survey-question">
                        <h4>${index + 1}. ${q}</h4>
                        <div class="likert-scale">
                            <div class="likert-option"><input type="radio" name="q${index}" value="5" required><label>Strongly Agree</label></div>
                            <div class="likert-option"><input type="radio" name="q${index}" value="4"><label>Agree</label></div>
                            <div class="likert-option"><input type="radio" name="q${index}" value="3"><label>Neutral</label></div>
                            <div class="likert-option"><input type="radio" name="q${index}" value="2"><label>Disagree</label></div>
                            <div class="likert-option"><input type="radio" name="q${index}" value="1"><label>Strongly Disagree</label></div>
                        </div>
                    </div>
                `;
            });

            cardGrid.innerHTML = `
                <div class="card about-title-card">
                    <h3><i class="fas fa-poll"></i> User Feedback Survey</h3>
                    <p>Help us improve with your responses</p>
                </div>
                
                <div class="card" style="grid-column: 1 / -1;">
                    <div class="survey-container">
                        <form onsubmit="submitSurvey(event)">
                            <!-- Demographics -->
                            <div class="survey-question">
                                <h4>Respondent Information</h4>
                                <div style="display: flex; gap: 20px; flex-wrap: wrap;">
                                    <div style="flex: 1; min-width: 200px;">
                                        <label style="display:block; margin-bottom:5px; font-weight:bold;">Name:</label>
                                        <input type="text" id="survey-name" required style="width:100%; padding:10px; border:1px solid #ddd; border-radius:5px;">
                                    </div>
                                    <div style="width: 100px;">
                                        <label style="display:block; margin-bottom:5px; font-weight:bold;">Age:</label>
                                        <input type="number" id="survey-age" required style="width:100%; padding:10px; border:1px solid #ddd; border-radius:5px;">
                                    </div>
                                </div>
                            </div>

                            <div class="survey-question">
                                <h4>Familiarity with Technology</h4>
                                <p style="font-size:0.9rem; margin-bottom:10px; color:#666;">Rate your comfort level with using technology.</p>
                                <div class="likert-scale">
                                    <div class="likert-option"><input type="radio" name="tech-familiarity" value="5" required><label>Very Familiar</label></div>
                                    <div class="likert-option"><input type="radio" name="tech-familiarity" value="4"><label>Familiar</label></div>
                                    <div class="likert-option"><input type="radio" name="tech-familiarity" value="3"><label>Neutral</label></div>
                                    <div class="likert-option"><input type="radio" name="tech-familiarity" value="2"><label>Unfamiliar</label></div>
                                    <div class="likert-option"><input type="radio" name="tech-familiarity" value="1"><label>Very Unfamiliar</label></div>
                                </div>
                            </div>

                            <hr style="margin: 20px 0; border: 0; border-top: 1px solid #eee;">

                            <div class="scale-legend">
                                <span>5: Strongly Agree</span>
                                <span>4: Agree</span>
                                <span>3: Neutral</span>
                                <span>2: Disagree</span>
                                <span>1: Strongly Disagree</span>
                            </div>

                            ${questionsHtml}
                            
                            <div class="survey-question">
                                <h4>Additional Comments</h4>
                                <textarea id="survey-comments" style="width:100%; padding:10px; border-radius:5px; border:1px solid #ddd; min-height:100px;" placeholder="Any other feedback?"></textarea>
                            </div>

                            <button type="submit" class="assistant-btn" style="width:100%; font-size: 1.1rem; justify-content: center;">Submit Survey</button>
                        </form>
                    </div>
                </div>
            `;
            document.getElementById('assistant-modal').style.display = 'none';
        }

        function submitSurvey(e) {
            e.preventDefault();

            // Gather data
            const name = document.getElementById('survey-name').value;
            const age = document.getElementById('survey-age').value;
            const techFamInput = document.querySelector('input[name="tech-familiarity"]:checked');
            const techFam = techFamInput ? techFamInput.value : "";
            const comments = document.getElementById('survey-comments').value;

            // Gather question answers
            const answers = {};
            for (let i = 0; i < 10; i++) {
                const qInput = document.querySelector(`input[name="q${i}"]:checked`);
                answers[`Q${i + 1}`] = qInput ? qInput.value : "";
            }

            const responseData = {
                timestamp: new Date().toLocaleString(),
                name: name,
                age: age,
                tech_familiarity: techFam,
                ...answers,
                comments: comments
            };

            // Save to LocalStorage
            let storedData = localStorage.getItem('survey_responses');
            let responses = storedData ? JSON.parse(storedData) : [];
            responses.push(responseData);
            localStorage.setItem('survey_responses', JSON.stringify(responses));

            alert("Thank you for your feedback! Your responses have been saved.");
            location.reload();
        }

        function exportData() {
            let storedData = localStorage.getItem('survey_responses');
            if (!storedData) {
                alert("No data to export.");
                return;
            }
            const responses = JSON.parse(storedData);

            // Convert to CSV
            if (responses.length === 0) {
                alert("No data to export.");
                return;
            }

            const headers = Object.keys(responses[0]);
            const csvRows = [];
            csvRows.push(headers.join(','));

            for (const row of responses) {
                const values = headers.map(header => {
                    const escaped = ('' + row[header]).replace(/"/g, '\\"');
                    return `"${escaped}"`;
                });
                csvRows.push(values.join(','));
            }

            const csvString = csvRows.join('\n');
            const blob = new Blob([csvString], { type: 'text/csv' });
            const url = window.URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.setAttribute('hidden', '');
            a.setAttribute('href', url);
            a.setAttribute('download', 'survey_responses.csv');
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
        }

        // View Events function
        function viewEvents() {
            const cardGrid = document.getElementById('card-grid');
            cardGrid.innerHTML =
                '<div class="card">' +
                '<h3><i class="fas fa-calendar-day"></i> Upcoming Events</h3>' +
                '<ul class="event-list">' +
                '<li><span>Science Fair</span> <span class="event-date">Today 10:00 AM</span></li>' +
                '<li><span>Basketball Practice</span> <span class="event-date">Today 3:45 PM</span></li>' +
                '<li><span>Parent-Teacher Meeting</span> <span class="event-date">Today 6:00 PM</span></li>' +
                '<li><span>Math Competition</span> <span class="event-date">Dec 5, 9:00 AM</span></li>' +
                '<li><span>Christmas Program</span> <span class="event-date">Dec 15, 1:00 PM</span></li>' +
                '<li><span>Graduation Ceremony</span> <span class="event-date">Mar 25, 2:00 PM</span></li>' +
                '</ul>' +
                '</div>';
            document.getElementById('assistant-modal').style.display = 'none';
        }
        function AboutUs() {
            const cardGrid = document.getElementById('card-grid');
            cardGrid.innerHTML = `
                <div class="card about-title-card">
                    <h3><i class="fas fa-users"></i> Our Research Team</h3>
                    <p>Meet the dedicated minds behind this project</p>
                </div>
                
                <div class="card member-card">
                    <img src="https://i.pinimg.com/originals/9f/4c/f0/9f4cf0f24b376077a2fcdab2e85c3584.jpg" alt="Clarence Andrei B. Santelices" class="member-image">
                    <div class="member-name">SANTELICES, CLARENCE ANDREI B.</div>
                    <div class="member-role">Research Leader</div>
                </div>

                <div class="card member-card">
                    <img src="https://i.pinimg.com/originals/9f/4c/f0/9f4cf0f24b376077a2fcdab2e85c3584.jpg" alt="Christian Lloyd M. Aragon" class="member-image">
                    <div class="member-name">ARAGON, CHRISTIAN LLOYD M.</div>
                    <div class="member-role">Co-Researcher</div>
                </div>

                <div class="card member-card">
                    <img src="libee.jpg" alt="John Libee L. Galano" class="member-image">
                    <div class="member-name">GALANO, JOHN LIBEE L.</div>
                    <div class="member-role">Co-Researcher</div>
                </div>

                <div class="card member-card">
                    <img src="https://i.pinimg.com/originals/9f/4c/f0/9f4cf0f24b376077a2fcdab2e85c3584.jpg" alt="Mikeria Angela F. Morondos" class="member-image">
                    <div class="member-name">MORONDOS, MIKERIA ANGELA F.</div>
                    <div class="member-role">Co-Researcher</div>
                </div>

                <div class="card member-card">
                    <img src="https://i.pinimg.com/originals/9f/4c/f0/9f4cf0f24b376077a2fcdab2e85c3584.jpg" alt="Christopher P. Cruz" class="member-image">
                    <div class="member-name">CRUZ, CHRISTOPHER P.</div>
                    <div class="member-role">Research Teacher</div>
                </div>
            `;
            document.getElementById('assistant-modal').style.display = 'none';
        }

        function readAnnouncements() {
            const cardGrid = document.getElementById('card-grid');
            cardGrid.innerHTML =
                '<div class="card">' +
                '<h3><i class="fas fa-bullhorn"></i> School Announcements</h3>' +
                '<ul class="event-list">' +
                '<li>Yearbook photos will be taken next week</li>' +
                '<li>Library will close early on Friday</li>' +
                '<li>New cafeteria menu now available</li>' +
                '<li>ID renewal deadline is December 10</li>' +
                '<li>Report cards will be distributed on Friday</li>' +
                '<li>School will be closed on December 25-January 1</li>' +
                '</ul>' +
                '</div>';
            document.getElementById('assistant-modal').style.display = 'none';
        }


        function getDirections() {
            document.getElementById('assistant-modal').style.display = 'none';
            const mapContainer = document.getElementById('map-container');
            mapContainer.scrollIntoView({ behavior: 'smooth' });
        }


        function callSchool() {
            document.getElementById('assistant-modal').style.display = 'none';
            alert('School Contact Numbers:\n\nPrincipal\'s Office: 890-8320\nMain Office: 890-5938\n\nYou can call during office hours (7:00 AM - 5:00 PM)');
        }

        function showDirectory() {
            const cardGrid = document.getElementById('card-grid');
            cardGrid.innerHTML =
                '<div class="card">' +
                '<h3><i class="fas fa-users"></i> Complete Staff Directory</h3>' +
                '<ul class="directory-list">' +
                '<li><span>Principal\'s Office</span> <span>Room 101</span></li>' +
                '<li><span>Vice Principal\'s Office</span> <span>Room 102</span></li>' +
                '<li><span>Guidance Counselor</span> <span>Room 203</span></li>' +
                '<li><span>Registrar</span> <span>Room 103</span></li>' +
                '<li><span>Nurse\'s Office</span> <span>Room 115</span></li>' +
                '<li><span>Dentist\'s Office</span> <span>Room 115</span></li>' +
                '<li><span>Conference Room</span> <span>Room 100</span></li>' +
                '<li><span>Senior High Faculty</span> <span>2nd Floor</span></li>' +
                '<li><span>Guard House</span> <span>Gate 1</span></li>' +
                '</ul>' +
                '</div>';
            document.getElementById('assistant-modal').style.display = 'none';
        }

        function viewNews() {
            const cardGrid = document.getElementById('card-grid');
            cardGrid.innerHTML = `
                <div class="card about-title-card">
                    <h3><i class="fas fa-newspaper"></i> Campus News</h3>
                    <p>Stay updated with our latest social media posts</p>
                </div>

                <div class="card" style="grid-column: 1 / -1; display: flex; justify-content: center; overflow: hidden;">
                    <!-- Facebook Page Plugin Iframe -->
                    <!-- REPLACE 'https://www.facebook.com/MakatiScienceHighSchool' WITH YOUR ACTUAL FB PAGE URL ENCODED -->
                    <!-- Example: https%3A%2F%2Fwww.facebook.com%2FYourPageName -->
                    <iframe src="https://www.facebook.com/plugins/page.php?href=https%3A%2F%2Fwww.facebook.com%2Ffacebook&tabs=timeline&width=500&height=800&small_header=false&adapt_container_width=true&hide_cover=false&show_facepile=true&appId" width="500" height="800" style="border:none;overflow:hidden; max-width: 100%;" scrolling="no" frameborder="0" allowfullscreen="true" allow="autoplay; clipboard-write; encrypted-media; picture-in-picture; web-share"></iframe>
                    
                    <div style="margin-top: 20px; text-align: center; color: #666; font-size: 0.9rem; width: 100%; display: none;">
                        <p>To change the Facebook page, edit the <code>src</code> attribute in the <code>viewNews</code> function inside Kiosk.html</p>
                    </div>
                </div>
            `;
            document.getElementById('assistant-modal').style.display = 'none';
        }

        function openChatbot() {
            document.getElementById('assistant-modal').style.display = 'none';
            const cardGrid = document.getElementById('card-grid');
            cardGrid.innerHTML = `
                <div class="card about-title-card">
                    <h3><i class="fas fa-robot"></i> AI Assistant</h3>
                    <p>Ask me anything about the school!</p>
                </div>
                
                <div class="card" style="grid-column: 1 / -1; min-height: 400px; display: flex; flex-direction: column; align-items: center; justify-content: center; text-align: center;">
                    <div style="font-size: 3rem; color: #4ca1af; margin-bottom: 20px;">
                        <i class="fas fa-comments"></i>
                    </div>
                    <h4>Chatbot Integration Placeholder</h4>
                    <p style="color: #666; max-width: 400px; margin-bottom: 20px;">
                        This area is ready for a chatbot integration. You can embed a service like Tidio, Chatbase, or a custom AI interface here.
                    </p>
                    <button class="assistant-btn" onclick="location.reload()" style="width: auto; padding: 10px 20px;">
                        <i class="fas fa-redo"></i> Reset View
                    </button>
                </div>
            `;
        }

        function checkSearchEnter(event) {
            if (event.key === "Enter") {
                performSearch();
            }
        }

        function performSearch() {
            const query = document.getElementById('search-input').value.toLowerCase().trim();
            if (!query) return;

            // Keyword Mappings
            if (query.includes("map") || query.includes("directory") || query.includes("building") || query.includes("floor")) {
                showCampusDirectory();
            } else if (query.includes("event") || query.includes("calendar") || query.includes("schedule")) {
                viewEvents();
            } else if (query.includes("news") || query.includes("facebook") || query.includes("social")) {
                viewNews();
            } else if (query.includes("announcement") || query.includes("notice") || query.includes("update")) {
                readAnnouncements();
            } else if (query.includes("about") || query.includes("team") || query.includes("research") || query.includes("who")) {
                AboutUs();
            } else if (query.includes("survey") || query.includes("feedback") || query.includes("rate")) {
                viewSurvey();
            } else if (query.includes("help") || query.includes("guide") || query.includes("faq") || query.includes("support")) {
                viewHelp();
            } else if (query.includes("navigate") || query.includes("room") || query.includes("find") || query.includes("location")) {
                navigateRooms();
            } else if (query.includes("chat") || query.includes("ai") || query.includes("robot") || query.includes("assistant")) {
                openChatbot();
            } else {
                alert("No results found for '" + query + "'. Try searching for 'events', 'map', 'news', or 'rooms'.");
            }
        }

        function viewHelp() {
            const cardGrid = document.getElementById('card-grid');
            cardGrid.innerHTML = `
                <div class="card about-title-card">
                    <h3><i class="fas fa-question-circle"></i> Help Center</h3>
                    <p>Frequently Asked Questions and Support</p>
                </div>

                <div class="card">
                    <h3><i class="fas fa-book"></i> User Guide</h3>
                    <p style="margin-bottom: 15px; color: #555;">Learn how to navigate the Smart Kiosk effectively.</p>
                    <ul class="directory-list">
                        <li><span>Searching</span> <span>Use sidebar search</span></li>
                        <li><span>Navigation</span> <span>Click Map for directions</span></li>
                        <li><span>Assistant</span> <span>Click the logo icon</span></li>
                    </ul>
                </div>

                <div class="card">
                    <h3><i class="fas fa-comments"></i> FAQ</h3>
                    <ul class="directory-list">
                        <li>
                            <div style="width: 100%">
                                <strong style="display:block; color:#2c3e50; margin-bottom:5px;">How do I find a room?</strong>
                                <span style="font-size: 0.9rem; color: #666;">Use the "Campus Directory" or ask the Assistant to "Navigate Rooms".</span>
                            </div>
                        </li>
                        <li>
                            <div style="width: 100%">
                                <strong style="display:block; color:#2c3e50; margin-bottom:5px;">Where is the clinic?</strong>
                                <span style="font-size: 0.9rem; color: #666;">The clinic is located in Building A, Room 115.</span>
                            </div>
                        </li>
                    </ul>
                </div>

                <div class="card">
                    <h3><i class="fas fa-headset"></i> Contact Support</h3>
                    <p style="margin-bottom: 15px; color: #555;">Need immediate assistance?</p>
                    <div style="text-align: center;">
                        <button class="assistant-btn" onclick="callSchool()" style="width: 100%; margin-bottom: 10px;"><i class="fas fa-phone"></i> Call Admin Office</button>
                        <p style="font-size: 0.85rem; color: #888;">Available 7:00 AM - 5:00 PM</p>
                    </div>
                    <div style="margin-top: 20px; border-top: 1px solid #eee; padding-top: 15px;">
                        <button onclick="exportData()" style="background: none; border: none; font-size: 0.8rem; color: #999; cursor: pointer;">
                            <i class="fas fa-download"></i> Admin: Export Data
                        </button>
                    </div>
                </div>
            `;
            document.getElementById('assistant-modal').style.display = 'none';
        }
    </script>

    <!-- Virtual Keyboard -->
    <div class="keyboard-container" id="virtual-keyboard">
        <button class="key close-keyboard" onclick="closeKeyboard()"><i class="fas fa-times"></i> Close</button>
        <div class="keyboard-row">
            <button class="key" onclick="typeKey('1')">1</button>
            <button class="key" onclick="typeKey('2')">2</button>
            <button class="key" onclick="typeKey('3')">3</button>
            <button class="key" onclick="typeKey('4')">4</button>
            <button class="key" onclick="typeKey('5')">5</button>
            <button class="key" onclick="typeKey('6')">6</button>
            <button class="key" onclick="typeKey('7')">7</button>
            <button class="key" onclick="typeKey('8')">8</button>
            <button class="key" onclick="typeKey('9')">9</button>
            <button class="key" onclick="typeKey('0')">0</button>
        </div>
        <div class="keyboard-row">
            <button class="key" onclick="typeKey('Q')">Q</button>
            <button class="key" onclick="typeKey('W')">W</button>
            <button class="key" onclick="typeKey('E')">E</button>
            <button class="key" onclick="typeKey('R')">R</button>
            <button class="key" onclick="typeKey('T')">T</button>
            <button class="key" onclick="typeKey('Y')">Y</button>
            <button class="key" onclick="typeKey('U')">U</button>
            <button class="key" onclick="typeKey('I')">I</button>
            <button class="key" onclick="typeKey('O')">O</button>
            <button class="key" onclick="typeKey('P')">P</button>
        </div>
        <div class="keyboard-row">
            <button class="key special" id="caps-lock-btn" onclick="toggleCapsLock()"><i
                    class="fas fa-arrow-up"></i></button>
            <button class="key" onclick="typeKey('A')">A</button>
            <button class="key" onclick="typeKey('S')">S</button>
            <button class="key" onclick="typeKey('D')">D</button>
            <button class="key" onclick="typeKey('F')">F</button>
            <button class="key" onclick="typeKey('G')">G</button>
            <button class="key" onclick="typeKey('H')">H</button>
            <button class="key" onclick="typeKey('J')">J</button>
            <button class="key" onclick="typeKey('K')">K</button>
            <button class="key" onclick="typeKey('L')">L</button>
        </div>
        <div class="keyboard-row">
            <button class="key" onclick="typeKey('Z')">Z</button>
            <button class="key" onclick="typeKey('X')">X</button>
            <button class="key" onclick="typeKey('C')">C</button>
            <button class="key" onclick="typeKey('V')">V</button>
            <button class="key" onclick="typeKey('B')">B</button>
            <button class="key" onclick="typeKey('N')">N</button>
            <button class="key" onclick="typeKey('M')">M</button>
            <button class="key special" onclick="typeKey('BACKSPACE')"><i class="fas fa-backspace"></i></button>
        </div>
        <div class="keyboard-row">
            <button class="key space" onclick="typeKey('SPACE')">SPACE</button>
            <button class="key special" onclick="typeKey('ENTER')">ENTER</button>
        </div>
    </div>

    <!-- Keyboard Script -->
    <script>
        let currentInput = null;
        let isCapsLock = false;

        function toggleCapsLock() {
            isCapsLock = !isCapsLock;
            const capsBtn = document.getElementById('caps-lock-btn');
            const keys = document.querySelectorAll('.key:not(.special):not(.space):not(.close-keyboard)');

            if (isCapsLock) {
                capsBtn.style.backgroundColor = '#3498db'; // Active state color
                capsBtn.style.color = 'white';
                keys.forEach(key => {
                    key.textContent = key.textContent.toUpperCase();
                });
            } else {
                capsBtn.style.backgroundColor = '#ecf0f1'; // Inactive state
                capsBtn.style.color = '#2c3e50';
                keys.forEach(key => {
                    // Only change letters to lowercase, leave numbers/symbols if any (currently only chars are uppercase in HTML)
                    // But wait, the innerText is what we change. HTML onclick remains "typeKey('A')".
                    // So visually we show 'a', but onclick sends 'A'.
                    // We need to handle this in typeKey.
                    if (key.textContent.length === 1 && key.textContent.match(/[A-Z]/)) {
                        key.textContent = key.textContent.toLowerCase();
                    }
                    // Actually keys are 0-9 and A-Z. 0-9 toLowerCase is same.
                    key.textContent = key.textContent.toLowerCase();
                });
            }
        }

        function closeKeyboard() {
            document.getElementById('virtual-keyboard').style.display = 'none';
            // Remove padding to reset view
            document.body.style.paddingBottom = '0';
        }

        function showKeyboard(inputElement) {
            currentInput = inputElement;
            document.getElementById('virtual-keyboard').style.display = 'block';

            // Unset Caps Lock on open to ensure consistent state or keep previous?
            // Usually valid to keep previous, but let's sync visual state if we want to be safe
            // For now, let's just leave it as is.

            // Ensure visual state matches isCapsLock (in case it was modified elsewhere or first load)
            // Actually, the keys are hardcoded UPPER in HTML.
            // On first load isCapsLock is false.
            // But we haven't run the toggle logic to set them to lower visual yet?
            // On first open, we should probably initialize functionality or just default to Upper?
            // Standard mobile keyboards start Lower.
            // Let's force update visual state on show.
            const keys = document.querySelectorAll('.key:not(.special):not(.space):not(.close-keyboard)');
            keys.forEach(key => {
                if (isCapsLock) {
                    key.textContent = key.textContent.toUpperCase();
                } else {
                    key.textContent = key.textContent.toLowerCase();
                }
            });
            const capsBtn = document.getElementById('caps-lock-btn');
            if (capsBtn) {
                if (isCapsLock) {
                    capsBtn.style.backgroundColor = '#3498db';
                    capsBtn.style.color = 'white';
                } else {
                    capsBtn.style.backgroundColor = '#ecf0f1';
                    capsBtn.style.color = '#2c3e50';
                }
            }

            // Add padding to body so keyboard doesn't cover content

            // Add padding to body so keyboard doesn't cover content
            document.body.style.paddingBottom = '350px';

            // Scroll element into view if needed
            setTimeout(() => {
                inputElement.scrollIntoView({ behavior: 'smooth', block: 'center' });
            }, 300);
        }

        function typeKey(key) {
            if (!currentInput) return;

            if (key === 'BACKSPACE') {
                currentInput.value = currentInput.value.slice(0, -1);
            } else if (key === 'SPACE') {
                currentInput.value += ' ';
            } else if (key === 'ENTER') {
                // Create and dispatch an Enter key event
                const enterEvent = new KeyboardEvent('keypress', {
                    key: 'Enter',
                    code: 'Enter',
                    keyCode: 13,
                    which: 13,
                    bubbles: true
                });
                currentInput.dispatchEvent(enterEvent);
                return;
            } else {
                // If the key is a letter, check capitalization logic if needed
                let charToType = key;
                if (key.length === 1 && /[a-zA-Z]/.test(key)) {
                    charToType = isCapsLock ? key.toUpperCase() : key.toLowerCase();
                }
                currentInput.value += charToType;
            }

            // Trigger input event so any listeners update (though none for now)
            currentInput.dispatchEvent(new Event('input', { bubbles: true }));
        }

        // Use event delegation for dynamically created survey inputs
        document.addEventListener('focusin', function (e) {
            if (e.target.tagName === 'INPUT' || e.target.tagName === 'TEXTAREA') {
                // Check if it's a text-like input
                // text, number, email, password, etc. but NOT radio, checkbox, submit, button
                const type = e.target.type;
                const validTypes = ['text', 'number', 'email', 'textarea', 'password', 'search', 'tel', 'url'];

                if (validTypes.includes(type) || e.target.tagName === 'TEXTAREA') {
                    showKeyboard(e.target);
                }
            }
        });
    </script>

</body>

</html>